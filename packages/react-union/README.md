# React Union

See API reference

Union is React component that allows you to assemble React application with just one virtual DOM even if consists of distributed HTML segments - _DOM-marks_.

_DOM-mark_s can be generated by a server technology that primarily does not support server-side rendering of JavaScript applications as are content management systems (_CMS_) - Wordpress, Drupal or Umbraco) or Portals (Liferay or Adobe Experience Manager).

## Content

* Simple example
* Installation
* FAQ
* Where I find more information?

## Simple example

**Your page**

```html
<main>
	<p>Static content produced by your favourite CMS.</p>


	<div id="hero-container"></div>


	<p>Another static content produced by your favourite CMS.</p>

	<!-- Union DOM-mark - configuration for your React widget  -->
	<!-- Probably rendered by a server  -->
	<script data-union-widget="" type="application/json">
	{
		"name": "hero",
		"container": "hero-container"
	}
	</script>
</main>
```

**Your Widget**

```js
// Hero.js

// Main component of your Hero widget
const Hero = () => "I am Hero!"

// Route is a object that pairs DOM-mark with your widget
export const route = { path: 'hero', getComponent(done) { done(Hero); } };

export default Hero;
```

**Your Root component**

```html
// Root.js

import React from 'react';
import { Union } from 'react-union';

import { route } from './Hero';

// `Union` renders found widgets into their containers
// but retains single virtual DOM. Yes, it uses React portals :)

const Root = () => <Union routes={[route]} />;

export default Root;
```

# FAQ

## _Why should I used it?_

React-Union makes features like hot module reloading possible with systems like Wordpress or Liferay! Isn't it enough?

```html
// index.js
import React from 'react';
import { render } from 'react-dom';

import Root from './Root';

const renderComponent = (Component) => render(
	<AppContainer>
		<Component />
	</AppContainer>,
	document.getElementById("root")
);

renderComponent(Root);

if (module.hot) {
	module.hot.accept(['./Root'], () => {
		const NextRoot = require('./Root').default;
		renderComponent(NextRoot);
	});
}

```

## _OK... And why single virtual DOM?_

*TL;DR;*: Redux :)

Your widgets might be distrubuted over the different parts of DOM but in your app you should use single source of truth - the Application State.
For example in Redux you should have one store. In Union is implementation straigtforward.

Yours entry file can look like this:

```html
// index.js

import { justRender } from 'react-union';
import Root from './Root';

// ...

const store = configureStore();

// "justRender" creates HTML element for you app.
// Useful if you don't have root element prepared
// Never use just "document.body"!
justRender(<Root store={store} />);

export default Root;
```

... and your Root component like this:

```html
// Root.js

import { Provider } from 'redux';

// ...

const Root = ({ store }) => (
	<Provider store={store}>
		<Union routes={[route]} />
	</Provider>
);

export default Root;
```

... and thats it.

Now every widget can `connect` to your store. Multiple widgets... but single state (time traveling everywhere!)!

## Installation

```sh
yarn add react-union
```

or

```sh
npm install --save react-union
```

And make sure you have React 16.0.0 or greater.

## Where I find more information?

* API reference - Work in progress
* React-union-boilerplate-basic - Example of project with React-union and React-union-scripts