!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["exports","react-dom","react"],t):t(n.ReactUnion={},n.ReactDOM,n.React)}(this,function(n,t,e){"use strict";function r(n){return function(){return n}}function u(n,t,e){for(var r=e.next();!r.done;){if((t=n["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=e.next()}return n["@@transducer/result"](t)}function o(n,t,e,r){return n["@@transducer/result"](e[r](U(n["@@transducer/step"],n),t))}function c(n,t,e){return function(){for(var r=[],u=0,o=n,a=0;t.length>a||arguments.length>u;){var i;a>=t.length||v(t[a])&&arguments.length>u?(i=arguments[u],u+=1):i=t[a],r[a]=i,v(i)||(o-=1),a+=1}return o>0?I(o,c(n,r,e)):e.apply(this,r)}}function a(n,t,e,r){function u(n,t){return i(n,t,e.slice(),r.slice())}var o=bn(n),c=bn(t);return!On(function(n,t){return!On(u,t,n)},c,o)}function i(n,t,e,r){if(wn(n,t))return!0;var u=Sn(n);if(u!==Sn(t))return!1;if(null==n||null==t)return!1;if("function"==typeof n["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n);if("function"==typeof n.equals||"function"==typeof t.equals)return"function"==typeof n.equals&&n.equals(t)&&"function"==typeof t.equals&&t.equals(n);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof n.constructor&&"Promise"===jn(n.constructor))return n===t;break;case"Boolean":case"Number":case"String":if(typeof n!=typeof t||!wn(n.valueOf(),t.valueOf()))return!1;break;case"Date":if(!wn(n.valueOf(),t.valueOf()))return!1;break;case"Error":return n.name===t.name&&n.message===t.message;case"RegExp":if(n.source!==t.source||n.global!==t.global||n.ignoreCase!==t.ignoreCase||n.multiline!==t.multiline||n.sticky!==t.sticky||n.unicode!==t.unicode)return!1}for(var o=e.length-1;o>=0;){if(e[o]===n)return r[o]===t;o-=1}switch(u){case"Map":return n.size===t.size&&a(n.entries(),t.entries(),e.concat([n]),r.concat([t]));case"Set":return n.size===t.size&&a(n.values(),t.values(),e.concat([n]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Q(n);if(c.length!==Q(t).length)return!1;var f=e.concat([n]),s=r.concat([t]);for(o=c.length-1;o>=0;){var l=c[o];if(!H(l,t)||!i(t[l],n[l],f,s))return!1;o-=1}return!0}var f="default"in t?t.default:t,s="default"in e?e.default:e,l=function(){};l.thatReturns=r,l.thatReturnsFalse=r(!1),l.thatReturnsTrue=r(!0),l.thatReturnsNull=r(null),l.thatReturnsThis=function(){return this},l.thatReturnsArgument=function(n){return n};var p=l,h=function(n,t,e,r,u,o,c,a){if(!n){var i;if(void 0===t)i=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[e,r,u,o,c,a],s=0;(i=Error(t.replace(/%s/g,function(){return f[s++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}},y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",d=function(n,t){return t={exports:{}},n(t,t.exports),t.exports}(function(n){n.exports=function(){function n(n,t,e,r,u,o){o!==y&&h(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return n}n.isRequired=n;var e={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return e.checkPropTypes=p,e.PropTypes=e,e}()}),g={container:d.string,path:d.string.isRequired},m={mark:d.shape({name:d.string.isRequired,container:d.string,namespace:d.string}),component:d.oneOfType([d.object,d.func])},v=function(n){return null!=n&&"object"==typeof n&&!0===n["@@functional/placeholder"]},b=function(n){return function t(e){return 0===arguments.length||v(e)?t:n.apply(this,arguments)}},O=function(n,t){if(!n)throw Error("There was an error. Use non-production build to see details.")},j=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",r=document.getElementById(n);return r||function(n,t,e){var r=document.createElement(e),u=document.createAttribute("id");return u.value=n,r.setAttributeNode(u),t.appendChild(r),r}(n,t,e)},w=b(function(n){return function(){return n}})(null),S="union",E=b(function(n){return null==n}),A=function(n){return function t(e,r){switch(arguments.length){case 0:return t;case 1:return v(e)?t:b(function(t){return n(e,t)});default:return v(e)&&v(r)?t:v(e)?b(function(t){return n(t,r)}):v(r)?b(function(t){return n(e,t)}):n(e,r)}}},x=Array.isArray||function(n){return null!=n&&n.length>=0&&"[object Array]"===Object.prototype.toString.call(n)},k=function(n){return"function"==typeof n["@@transducer/step"]},P=function(n,t,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),u=r.pop();if(!x(u)){for(var o=0;n.length>o;){if("function"==typeof u[n[o]])return u[n[o]].apply(u,r);o+=1}if(k(u))return t.apply(null,r)(u)}return e.apply(this,arguments)}},R=function(n,t){for(var e=0,r=t.length,u=Array(r);r>e;)u[e]=n(t[e]),e+=1;return u},T=function(n){return"[object String]"===Object.prototype.toString.call(n)},_=b(function(n){return!!x(n)||!!n&&("object"==typeof n&&(!T(n)&&(1===n.nodeType?!!n.length:0===n.length||n.length>0&&(n.hasOwnProperty(0)&&n.hasOwnProperty(n.length-1)))))}),q=function(){function n(n){this.f=n}return n.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},n.prototype["@@transducer/result"]=function(n){return n},n.prototype["@@transducer/step"]=function(n,t){return this.f(n,t)},n}(),C=function(n){return new q(n)},I=function(n,t){switch(n){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,e){return t.apply(this,arguments)};case 3:return function(n,e,r){return t.apply(this,arguments)};case 4:return function(n,e,r,u){return t.apply(this,arguments)};case 5:return function(n,e,r,u,o){return t.apply(this,arguments)};case 6:return function(n,e,r,u,o,c){return t.apply(this,arguments)};case 7:return function(n,e,r,u,o,c,a){return t.apply(this,arguments)};case 8:return function(n,e,r,u,o,c,a,i){return t.apply(this,arguments)};case 9:return function(n,e,r,u,o,c,a,i,f){return t.apply(this,arguments)};case 10:return function(n,e,r,u,o,c,a,i,f,s){return t.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}},U=A(function(n,t){return I(n.length,function(){return n.apply(t,arguments)})}),N="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",B=function(n,t,e){if("function"==typeof n&&(n=C(n)),_(e))return function(n,t,e){for(var r=0,u=e.length;u>r;){if((t=n["@@transducer/step"](t,e[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return n["@@transducer/result"](t)}(n,t,e);if("function"==typeof e["fantasy-land/reduce"])return o(n,t,e,"fantasy-land/reduce");if(null!=e[N])return u(n,t,e[N]());if("function"==typeof e.next)return u(n,t,e);if("function"==typeof e.reduce)return o(n,t,e,"reduce");throw new TypeError("reduce: list must be array or iterable")},F=function(){return this.xf["@@transducer/init"]()},M=function(n){return this.xf["@@transducer/result"](n)},D=function(){function n(n,t){this.xf=t,this.f=n}return n.prototype["@@transducer/init"]=F,n.prototype["@@transducer/result"]=M,n.prototype["@@transducer/step"]=function(n,t){return this.xf["@@transducer/step"](n,this.f(t))},n}(),z=A(function(n,t){return new D(n,t)}),L=c,W=A(function(n,t){return 1===n?b(t):I(n,L(n,[],t))}),H=function(n,t){return Object.prototype.hasOwnProperty.call(t,n)},J=Object.prototype.toString,V=function(){return"[object Arguments]"===J.call(arguments)?function(n){return"[object Arguments]"===J.call(n)}:function(n){return H("callee",n)}},X=!{toString:null}.propertyIsEnumerable("toString"),Y=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(){return arguments.propertyIsEnumerable("length")}(),K=function(n,t){for(var e=0;n.length>e;){if(n[e]===t)return!0;e+=1}return!1},Q=b("function"!=typeof Object.keys||G?function(n){if(Object(n)!==n)return[];var t,e,r=[],u=G&&V(n);for(t in n)!H(t,n)||u&&"length"===t||(r[r.length]=t);if(X)for(e=Y.length-1;e>=0;)H(t=Y[e],n)&&!K(r,t)&&(r[r.length]=t),e-=1;return r}:function(n){return Object(n)!==n?[]:Object.keys(n)}),Z=A(P(["fantasy-land/map","map"],z,function(n,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return W(t.length,function(){return n.call(this,t.apply(this,arguments))});case"[object Object]":return B(function(e,r){return e[r]=n(t[r]),e},{},Q(t));default:return R(n,t)}})),$=A(function(n,t){for(var e=t,r=0;n.length>r;){if(null==e)return;e=e[n[r]],r+=1}return e}),nn=A(function(n,t){return $([n],t)}),tn=function(n){return function t(e,r,u){switch(arguments.length){case 0:return t;case 1:return v(e)?t:A(function(t,r){return n(e,t,r)});case 2:return v(e)&&v(r)?t:v(e)?A(function(t,e){return n(t,r,e)}):v(r)?A(function(t,r){return n(e,t,r)}):b(function(t){return n(e,r,t)});default:return v(e)&&v(r)&&v(u)?t:v(e)&&v(r)?A(function(t,e){return n(t,e,u)}):v(e)&&v(u)?A(function(t,e){return n(t,r,e)}):v(r)&&v(u)?A(function(t,r){return n(e,t,r)}):v(e)?b(function(t){return n(t,r,u)}):v(r)?b(function(t){return n(e,t,u)}):v(u)?b(function(t){return n(e,r,t)}):n(e,r,u)}}},en=tn(function(n,t,e){return n(t(e))}),rn=tn(function(n,t,e){return W(Math.max(n.length,t.length,e.length),function(){return n.apply(this,arguments)?t.apply(this,arguments):e.apply(this,arguments)})}),un=A(function(n,t){for(var e={},r={},u=0,o=n.length;o>u;)r[n[u]]=1,u+=1;for(var c in t)r.hasOwnProperty(c)||(e[c]=t[c]);return e}),on=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},cn=function(){function n(n,t){for(var e=0;t.length>e;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),an=Object.assign||function(n){for(var t=1;arguments.length>t;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},fn=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},sn=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},ln=un(["namespace","children"]),pn=function(n){function t(){return on(this,t),sn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fn(t,e.Component),cn(t,[{key:"getChildContext",value:function(){return{widget:{namespace:this.props.namespace,props:ln(this.props)}}}},{key:"render",value:function(){var n=this.props;return n.children}}]),t}();pn.childContextTypes={widget:d.shape({namespace:d.string,props:d.object})},pn.propTypes={children:d.node.isRequired,namespace:d.string.isRequired};var hn=function(n){var e=n.component,r=n.mark,u=r.container,o=r.namespace,c=function(n,t){var e={};for(var r in n)0>t.indexOf(r)&&Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}(r,["name","container","namespace"]),a=o||u;O(!e||u);var i={namespace:a},f=document.getElementById(u);return e&&f?t.createPortal(s.createElement(pn,i,s.createElement(e,an({},i,c))),f):null};hn.propTypes=an({},m);var yn=rn(E,w,Z(function(n){return s.createElement(hn,an({key:n.mark.namespace||n.mark.container},n))})),dn=en(yn,nn("configs"));dn.propTypes={configs:d.arrayOf(d.shape(m))};var gn=A(function(n,t){switch(n){case 0:return function(){return t.call(this)};case 1:return function(n){return t.call(this,n)};case 2:return function(n,e){return t.call(this,n,e)};case 3:return function(n,e,r){return t.call(this,n,e,r)};case 4:return function(n,e,r,u){return t.call(this,n,e,r,u)};case 5:return function(n,e,r,u,o){return t.call(this,n,e,r,u,o)};case 6:return function(n,e,r,u,o,c){return t.call(this,n,e,r,u,o,c)};case 7:return function(n,e,r,u,o,c,a){return t.call(this,n,e,r,u,o,c,a)};case 8:return function(n,e,r,u,o,c,a,i){return t.call(this,n,e,r,u,o,c,a,i)};case 9:return function(n,e,r,u,o,c,a,i,f){return t.call(this,n,e,r,u,o,c,a,i,f)};case 10:return function(n,e,r,u,o,c,a,i,f,s){return t.call(this,n,e,r,u,o,c,a,i,f,s)};default:throw Error("First argument to nAry must be a non-negative integer no greater than ten")}}),mn=b(function(n){return gn(1,n)}),vn=b(function(n){for(var t={},e=0;n.length>e;)t[n[e][0]]=n[e][1],e+=1;return t}),bn=function(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e},On=function(n,t,e){for(var r=0,u=e.length;u>r;){if(n(t,e[r]))return!0;r+=1}return!1},jn=function(n){var t=(n+"").match(/^function (\w*)/);return null==t?"":t[1]},wn=A(function(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}),Sn=b(function(n){return null===n?"Null":void 0===n?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),En=i,An=A(function(n,t){return En(n,t,[],[])}),xn=function(n,t,e){var r,u;if("function"==typeof n.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n.length>e;){if(0===(u=n[e])&&1/u===r)return e;e+=1}return-1}if(t!=t){for(;n.length>e;){if("number"==typeof(u=n[e])&&u!=u)return e;e+=1}return-1}return n.indexOf(t,e);case"string":case"boolean":case"function":case"undefined":return n.indexOf(t,e);case"object":if(null===t)return n.indexOf(t,e)}for(;n.length>e;){if(An(n[e],t))return e;e+=1}return-1},kn=A(function(n,t){return xn(t,n,0)>=0}),Pn=function(n,t){for(var e=0,r=t.length,u=[];r>e;)n(t[e])&&(u[u.length]=t[e]),e+=1;return u},Rn=function(n){return"[object Object]"===Object.prototype.toString.call(n)},Tn=function(){function n(n,t){this.xf=t,this.f=n}return n.prototype["@@transducer/init"]=F,n.prototype["@@transducer/result"]=M,n.prototype["@@transducer/step"]=function(n,t){return this.f(t)?this.xf["@@transducer/step"](n,t):n},n}(),_n=A(P(["filter"],A(function(n,t){return new Tn(n,t)}),function(n,t){return Rn(t)?B(function(e,r){return n(t[r])&&(e[r]=t[r]),e},{},Q(t)):Pn(n,t)})),qn=b(function(n){return W(n.length,function(t,e){var r=Array.prototype.slice.call(arguments,0);return r[0]=e,r[1]=t,n.apply(this,r)})}),Cn=A(function(n,t){return function(){var e=arguments.length;if(0===e)return t();var r=arguments[e-1];return x(r)||"function"!=typeof r[n]?t.apply(this,arguments):r[n].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}("forEach",function(n,t){for(var e=t.length,r=0;e>r;)n(t[r]),r+=1;return t}))(function(n){var t=n.name,e=n.namespace,r=n.container;O(t),O(e||r)}),In=qn(kn),Un=$(["path"]),Nn=Z($(["name"])),Bn=en(mn(JSON.parse),$(["innerHTML"])),Fn=en(Z(Bn),function(n){return n.querySelectorAll("[data-union-widget]")}),Mn=en(vn,Z(function(n){return[n.name,n]})),Dn=function(n,t){var e=Nn(t),r=Mn(t);return en(Z(function(n){return function(n){return new Promise(function(t){return n.getComponents(t)})}(n).then(function(n){return function(t){return{component:t,mark:$([n.path],r)}}}(n))}),_n(en(In(e),Un)))(n)},zn=function(n){function t(){var n,e,r,u;on(this,t);for(var o=arguments.length,c=Array(o),a=0;o>a;a++)c[a]=arguments[a];return e=r=sn(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(c))),r.state={configs:[]},u=e,sn(r,u)}return fn(t,e.Component),cn(t,[{key:"componentDidMount",value:function(){this.scan(this.props)}},{key:"componentWillReceiveProps",value:function(n){n.routes!==this.props.routes&&this.scan(n)}},{key:"scan",value:function(n){var t=this,e=n.onEndScan,r=n.onErrorScan,u=n.parent,o=n.routes;(0,n.onStartScan)();(function(n,t){var e=Fn(t);Cn(e);var r=Dn(n,e);return Promise.all(r)})(o,u||document.body).then(function(n){e(n),t.setState({configs:n})},function(n){return r(n)})}},{key:"render",value:function(){return s.createElement("div",null,this.props.children,s.createElement(dn,{configs:this.state.configs}))}}]),t}();zn.propTypes={children:d.node,onEndScan:d.func,onErrorScan:d.func,onStartScan:d.func,parent:d.object,routes:d.arrayOf(d.shape(g))},zn.defaultProps={onEndScan:w,onErrorScan:w,onStartScan:w},n.Union=zn,n.RouteShape=g,n.ConfigShape=m,n.justRender=function(n){var t=arguments[2],e=j(arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,document.body);f.render(n,e,t)},n.justUnmountComponentAtNode=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,e=document.getElementById(t);f.unmountComponentAtNode(e)},Object.defineProperty(n,"__esModule",{value:!0})});
